<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>虎尾高中二類組-學分計算器(到二年級為止)</title>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 增加 Inter 字體 */
        body {
            font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }
        /* 隱藏課程區塊的基底樣式 */
        .course-list {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto max-w-2xl p-6 bg-white rounded-lg shadow-xl my-10">
        
        <h1 class="text-3xl font-bold text-center text-blue-700 mb-6">虎尾高中二類組-學分計算器(到二年級為止)</h1>
        
        <!-- 年級選擇 -->
        <div class="mb-6">
            <label for="grade-selector" class="block text-lg font-medium text-gray-700 mb-2">請選擇年級：</label>
            <select id="grade-selector" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="grade1">高一</option>
                <option value="grade2">高二</option>
                <option value="grade3">高三(empty)</option>
            </select>
        </div>

        <!-- 課程列表容器 -->
        <div id="courses-container">
            <!-- 高一課程 (預設顯示) -->
            <div id="grade1-courses" class="course-list space-y-3" style="display: block;">
                <!-- 內容將由 JavaScript 動態生成 -->
            </div>
            <!-- 高二課程 -->
            <div id="grade2-courses" class="course-list space-y-3">
                <!-- 內容將由 JavaScript 動態生成 -->
            </div>
            <!-- 高三課程 -->
            <div id="grade3-courses" class="course-list space-y-3">
                <!-- 內容將由 JavaScript 動態生成 -->
            </div>
        </div>

        <!-- 計算按鈕 -->
        <button id="calculate-btn" class="w-full bg-blue-600 text-white p-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 mt-8 text-lg">
            計算總學分
        </button>

        <!-- 結果顯示區 -->
        <div id="results" class="mt-8 bg-blue-50 p-6 rounded-lg shadow-inner hidden">
            <h2 class="text-2xl font-semibold text-blue-800 mb-4">學分統計結果</h2>
            <div class="space-y-3">
                <p class="text-lg">
                    <strong>部定/校訂必修：</strong>
                    <span id="required-credits" class="font-bold text-xl text-green-700">0</span> 學分
                </p>
                <p class="text-lg">
                    <strong>選修：</strong>
                    <span id="elective-credits" class="font-bold text-xl text-green-700">0</span> 學分
                </p>
                <hr class="my-2 border-gray-300">
                <p class="text-xl">
                    <strong>總學分：</strong>
                    <span id="total-credits" class="font-bold text-2xl text-red-600">0</span> 學分
                </p>
            </div>
        </div>

    </div>

    <script>
        // --- 課程資料 ---
        // 您可以在這裡方便地編輯所有課程
        // type: 'ministry' (部定必修), 'school' (校訂必修), 'elective' (選修)
        const courseData = {
            'grade1': [
                { id: 'g1_chinese1', name: '國文上', type: 'ministry', credits: 4 },                
				{ id: 'g1_chinese2', name: '國文下', type: 'ministry', credits: 4 },
                { id: 'g1_math1', name: '數學上', type: 'ministry', credits: 4 },
				{ id: 'g1_math2', name: '數學下', type: 'ministry', credits: 4 },
                { id: 'g1_english1', name: '英文上', type: 'ministry', credits: 4 },
				{ id: 'g1_english2', name: '英文下', type: 'ministry', credits: 4 },
                { id: 'g1_history1', name: '歷史上', type: 'ministry', credits: 2 },
				{ id: 'g1_history2', name: '歷史下', type: 'ministry', credits: 2 },
				{ id: 'g1_geo1', name: '地理上', type: 'ministry', credits: 2 },
				{ id: 'g1_geo2', name: '地理下', type: 'ministry', credits: 2 },
				{ id: 'g1_cri1', name: '公民與社會上', type: 'ministry', credits: 2 },
				{ id: 'g1_cri2', name: '公民與社會下', type: 'ministry', credits: 2 },
                { id: 'g1_physics', name: '高一物理', type: 'ministry', credits: 2 },
				{ id: 'g1_bio', name: '高一生物', type: 'ministry', credits: 2 },
				{ id: 'g1_ear', name: '高一地球科學', type: 'ministry', credits: 2 },
				{ id: 'g1_psy', name: '高一化學', type: 'ministry', credits: 2 },
                { id: 'g1_pe1', name: '體育上', type: 'ministry', credits: 2 },
				{ id: 'g1_pe2', name: '體育下', type: 'ministry', credits: 2 },
                { id: 'g1_art1', name: '美術上', type: 'ministry', credits: 1 },
				{ id: 'g1_art2', name: '美術下', type: 'ministry', credits: 1 },
				{ id: 'tai_1', name: '閩南語文-上', type: 'ministry', credits: 1 },
				{ id: 'tai_2', name: '閩南語文-下', type: 'ministry', credits: 1 },
				{ id: 'g1_mus_1', name: '音樂上', type: 'ministry', credits: 1 },
				{ id: 'g1_mus_2', name: '音樂下', type: 'ministry', credits: 1 },
				{ id: 'cook', name: '家政', type: 'ministry', credits: 2 },
				{ id: 'g1_tech', name: '生活科技', type: 'ministry', credits: 2 },
				{ id: 'g1_school_1', name: '漫遊雲林接軌國際', type: 'school', credits: 1 },
				{ id: 'g1_school_2', name: '漫遊雲林接軌國際', type: 'school', credits: 1 },
				{ id: 'g1_elective_a', name: '高一選修A', type: 'elective', credits: 1 },
                { id: 'g1_elective_b', name: '高一選修B', type: 'elective', credits: 1 },				
            ],
            'grade2': [
                { id: 'g2_chinese1', name: '國文上', type: 'ministry', credits: 4 },                
				{ id: 'g2_chinese2', name: '國文下', type: 'ministry', credits: 4 },
                { id: 'g2_math1', name: '數學上', type: 'ministry', credits: 4 },
				{ id: 'g2_math2', name: '數學下', type: 'ministry', credits: 4 },
                { id: 'g2_english1', name: '英文上', type: 'ministry', credits: 4 },
				{ id: 'g2_english2', name: '英文下', type: 'ministry', credits: 4 },
                { id: 'g2_history1', name: '歷史', type: 'ministry', credits: 2 },
				{ id: 'g2_geo1', name: '地理', type: 'ministry', credits: 2 },
				{ id: 'g2_cri1', name: '公民與社會', type: 'ministry', credits: 2 },
                { id: 'g2_physics', name: '選修物理-力學一', type: 'elective', credits: 2 },
				{ id: 'g2_bio', name: '選修物理-力學二與熱學', type: 'elective', credits: 2 },
				{ id: 'g2_ear', name: '選修化學-物質與能量', type: 'elective', credits: 2 },
				{ id: 'g2_psy', name: '選修化學-物質構造與反應速率	', type: 'elective', credits: 2 },
                { id: 'g2_pe1', name: '體育上', type: 'ministry', credits: 2 },
				{ id: 'g2_pe2', name: '體育下', type: 'ministry', credits: 2 },
                { id: 'g2_art1', name: '美術', type: 'ministry', credits: 2},
				{ id: 'g2_tech_1', name: '資訊科技', type: 'ministry', credits: 2 },
				{ id: 'g2_tech_2', name: '進階程式設計', type: 'elective', credits: 2 },
				{ id: 'g2_mus_1', name: '音樂上', type: 'ministry', credits: 1 },
				{ id: 'g2_mus_2', name: '音樂下', type: 'ministry', credits: 1 },
				{ id: 'g2_A', name: '化學-探究A', type: 'ministry', credits: 2 },
				{ id: 'g2_B', name: '物理-探究B', type: 'ministry', credits: 2 },
				{ id: 'g2_school_1', name: '健康與護理上', type: 'ministry', credits: 1 },
				{ id: 'g2_school_2', name: '健康與護理下', type: 'ministry', credits: 1 },
				{ id: 'g2_elective_a', name: '多元選修A', type: 'elective', credits: 2 },
                { id: 'g2_elective_b', name: '多元選修B', type: 'elective', credits: 2 },				
            ],
            'grade3': [
				
               
            ]
        };

        // 儲存所有課程的勾選狀態 (通過/被當)
        // 這是關鍵，這個物件會保留所有狀態，不會因為切換年級而消失
        let passStatus = {};

        // 課程類型中文對照
        const typeMap = {
            'ministry': '部定必修',
            'school': '校訂必修',
            'elective': '選修'
        };

        // 類型顏色
        const typeColor = {
            'ministry': 'text-red-600',
            'school': 'text-purple-600',
            'elective': 'text-gray-600'
        }

        // 頁面加載時初始化
        document.addEventListener('DOMContentLoaded', () => {
            generateCourseLists();
            setupEventListeners();
        });

        // 動態生成所有課程列表
        function generateCourseLists() {
            const container = document.getElementById('courses-container');
            
            // 遍歷所有年級
            for (const gradeKey in courseData) {
                const gradeContainer = document.getElementById(`${gradeKey}-courses`);
                if (!gradeContainer) continue;

                const courses = courseData[gradeKey];
                
                // 遍歷該年級所有課程
                courses.forEach(course => {
                    // 預設所有課程都是通過的 (checked)
                    if (passStatus[course.id] === undefined) {
                        passStatus[course.id] = true;
                    }

                    const isChecked = passStatus[course.id];

                    // 建立課程項目 HTML
                    const courseEl = document.createElement('label');
                    courseEl.htmlFor = course.id;
                    courseEl.className = 'flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg shadow-sm cursor-pointer hover:bg-gray-50 transition-all';
                    
                    courseEl.innerHTML = `
                        <div class="flex items-center">
                            <input type="checkbox" id="${course.id}" class="form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500" ${isChecked ? 'checked' : ''}>
                            <span class="ml-4 text-lg font-medium text-gray-800">${course.name}</span>
                        </div>
                        <div class="text-right">
                            <span class="text-sm font-semibold ${typeColor[course.type] || 'text-gray-600'}">${typeMap[course.type] || '其他'}</span>
                            <span class="block text-base font-bold text-gray-900">${course.credits} 學分</span>
                        </div>
                    `;
                    
                    gradeContainer.appendChild(courseEl);

                    // 為 checkbox 加上監聽器，以更新 passStatus
                    courseEl.querySelector('input[type="checkbox"]').addEventListener('change', (event) => {
                        passStatus[course.id] = event.target.checked;
                    });
                });
            }
        }

        // 設定事件監聽器
        function setupEventListeners() {
            const gradeSelector = document.getElementById('grade-selector');
            const calculateBtn = document.getElementById('calculate-btn');

            // 年級選單切換
            gradeSelector.addEventListener('change', (event) => {
                const selectedGrade = event.target.value;
                
                // 隱藏所有課程列表
                document.querySelectorAll('.course-list').forEach(list => {
                    list.style.display = 'none';
                });

                // 顯示選定的年級列表
                const targetList = document.getElementById(`${selectedGrade}-courses`);
                if (targetList) {
                    targetList.style.display = 'block';
                }
            });

            // 計算按鈕點擊
            calculateBtn.addEventListener('click', calculateCredits);
        }

        // 計算學分
        function calculateCredits() {
            let requiredCredits = 0;
            let electiveCredits = 0;
            let totalCredits = 0;

            // 遍歷所有年級的課程資料
            for (const gradeKey in courseData) {
                courseData[gradeKey].forEach(course => {
                    // 檢查 passStatus 來確認課程是否通過
                    if (passStatus[course.id]) {
                        totalCredits += course.credits;

                        if (course.type === 'ministry' || course.type === 'school') {
                            requiredCredits += course.credits;
                        } else if (course.type === 'elective') {
                            electiveCredits += course.credits;
                        }
                    }
                });
            }

            // 更新顯示結果
            document.getElementById('required-credits').textContent = requiredCredits;
            document.getElementById('elective-credits').textContent = electiveCredits;
            document.getElementById('total-credits').textContent = totalCredits;

            // 顯示結果區
            document.getElementById('results').style.display = 'block';
        }
    </script>

</body>
</html>
